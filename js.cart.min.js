"object"==typeof Countries&&(Countries.updateProvinceLabel=function(e,t){if("string"==typeof e&&Countries[e]&&Countries[e].provinces&&("object"==typeof t||null!==(t=document.getElementById("address_province_label")))){t.innerHTML=Countries[e].label;var r=t.parentElement;r.querySelector("select"),r.querySelector(".custom-style-select-box-inner")&&(r.querySelector(".custom-style-select-box-inner").innerHTML=Countries[e].provinces[0])}}),"undefined"==typeof Shopify&&(Shopify={}),void 0===Shopify.Cart&&(Shopify.Cart={}),Shopify.Cart.ShippingCalculator=function(){var e={submitButton:"Calculate shipping",submitButtonDisabled:"Calculating...",templateId:"shipping-calculator-response-template",wrapperId:"wrapper-response",customerIsLoggedIn:!1,moneyFormat:"${{amount}}"};function t(t){var r=document.getElementById(e.templateId),n=document.getElementById(e.wrapperId);if(r&&n){var o=Handlebars.compile(r.textContent.trim())(t);if(n.insertAdjacentHTML("beforeend",o),"undefined"!=typeof Currency&&"function"==typeof Currency.convertAll){var a="",i=document.querySelector("[name=currencies]");if(i)a=i.value;else{var s=document.querySelector("#currencies span.selected");s&&(a=s.getAttribute("data-currency"))}""!==a&&Currency.convertAll(shopCurrency,a,"#wrapper-response span.money")}}}function r(){document.querySelectorAll(".get-rates").forEach(function(t){t.removeAttribute("disabled"),t.classList.remove("disabled"),t.value=e.submitButton})}function n(n){r();var o="";try{var a,i,s=JSON.parse(n.responseText);o=s.message?s.message+"("+s.status+"): "+s.description:"Error : "+(a=s,i=[],Object.entries(a).forEach(function(e){var t=e[0];e[1].forEach(function(e){i.push(t+" "+e)})}),i).join("; ")+"."}catch(c){o="Error : country is not supported."}"Error : country is not supported."===o&&(o="We do not ship to this destination."),t({rates:[],errorFeedback:o,success:!1}),document.getElementById(e.wrapperId).style.display="block"}function o(t){function r(e,t){return void 0===e?t:e}function n(e,t,n,o){if(t=r(t,2),n=r(n,","),o=r(o,"."),isNaN(e)||null===e)return 0;var a,i=(e=(e/100).toFixed(t)).split(".");return i[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+n)+(i[1]?o+i[1]:"")}if("function"==typeof Shopify.formatMoney)return Shopify.formatMoney(t,e.moneyFormat);"string"==typeof t&&(t=t.replace(".",""));var o="",a=/\{\{\s*(\w+)\s*\}\}/,i=e.moneyFormat,s=(i=document.createRange().createContextualFragment(i).textContent).match(a);if(s&&s[1])switch(s[1]){case"amount":o=n(t,2);break;case"amount_no_decimals":o=n(t,0);break;case"amount_with_comma_separator":o=n(t,2,".",",");break;case"amount_no_decimals_with_comma_separator":o=n(t,0,".",",")}return i.replace(a,o)}function a(){new Shopify.CountryProvinceSelector("address_country","address_province",{hideElement:"address_province_container"});var a=document.getElementById("address_country"),i=document.getElementById("address_province_label");"undefined"!=typeof Countries&&(Countries.updateProvinceLabel(a.value,i),a.addEventListener("change",function(){Countries.updateProvinceLabel(a.value,i)})),document.querySelectorAll(".get-rates").forEach(function(a){a.addEventListener("click",function(){document.querySelectorAll(".get-rates").forEach(function(t){t.value=e.submitButtonDisabled,t.setAttribute("disabled","disabled"),t.classList.add("disabled")}),document.getElementById(e.wrapperId).innerHTML="",document.getElementById(e.wrapperId).style.display="none";var a={};a.zip=document.getElementById("address_zip").value||"",a.country=document.getElementById("address_country").value||"",a.province=document.getElementById("address_province").value||"",function a(i){var s={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({"shipping_address[zip]":i.zip,"shipping_address[country]":i.country,"shipping_address[province]":i.province})};fetch(window.Shopify.routes.root+"cart/prepare_shipping_rates",s).then(function(){var a;a=i,setTimeout(function(){var i=new URLSearchParams({"shipping_address[zip]":a.zip,"shipping_address[country]":a.country,"shipping_address[province]":a.province});fetch(window.Shopify.routes.root+"cart/async_shipping_rates.json?"+i.toString()).then(function(e){if(200===e.status)return e.json();throw Error("Failed to fetch shipping rates")}).then(function(n){(function n(a,i){r();var s="";if(i.zip&&(s+=i.zip+", "),i.province&&(s+=i.province+", "),s+=i.country,a.length){"0.00"===a[0].price?document.getElementById(e.wrapperId).innerHTML="FREE":document.getElementById(e.wrapperId).innerHTML=o(a[0].price);for(var c=0;c<a.length;c++)a[c].price=o(a[c].price)}t({rates:a,address:s,success:!0}),document.getElementById(e.wrapperId).style.display="block"})(n.shipping_rates,a)}).catch(n)},500)}).catch(n)}(a)})}),e.customerIsLoggedIn&&document.querySelector(".get-rates").click()}return{show:function(t){Object.assign(e,t=t||{}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){a()}):a()},getConfig:function(){return e},formatRate:function(e){return o(e)}}}();
